<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Record">450b8be62f7130100a9e43e72799b6a8</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"a514bcf1d08a418db4b3fa15d07d7045","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"a514bcf1d08a418db4b3fa15d07d7045"}],"goals":[{"name":"primary","trigger_id":"a514bcf1d08a418db4b3fa15d07d7045","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Bonjour {0}\\n\\nJe peux vous aider à trouver et à mettre à jour les enregistrements NeedIt pour un type de demande.\", vaContext.getRequesterLang(), [vaInputs.user.name])"},"id":"2a3a5671deef4a56ad706f7633c4e36f","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Demandez à nouveau lorsque vous devez mettre à jour d'autres enregistrements NeedIt.\\n\\nMeilleures salutations.\", vaContext.getRequesterLang())"},"id":"8b630fc631c04fe29c3f687b8bfde651","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"519f8bd1534d49aebccf6a30677005fa","name":"NeedIT Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"b9ba130a21a048b0b2c42b84f39c4dc7","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Quel type d'enregistrement NeedIt souhaitez-vous consulter ?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n    return 'Vous avez sélectionné: ' + vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"9186cf3768e44be99da993c926d9a2a9","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"52613459c5134898859711383a6cff3b","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"dc7dee60614242e3bd50b99150fbaa4c","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Sélectionnez un enregistrement NeedIt à afficher.\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n})(table)\n","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Vous n'avez pas de dossier NeedIt ouvert.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"dc7dee60614242e3bd50b99150fbaa4c","fields":["priority","short_description","u_when_needed"],"id":"aa971667b0d64c29802515d75ab87a54","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"InputPrompt","variable_id":"effe74cedcdb4d4ab6ceae0513c947a0","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Vous souhaitez consulter un autre dossier NeedIt ?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"23a2b937be1d459eaaa13a6b8d2a9a63","name":" Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Trouvez d'autres enregistrements NeedIt ","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"_search_again="},"id":"707ffe57902a44d0a0e790e12d0214bd","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"_search_again=true"},"id":"af621f0b79a7484690c71da71bee7bd4","name":"Yes"}],"id":"3f24c3bdb81a4bfbba8672ebfc8cb353","goal_id":"primary"},{"type":"InputPrompt","variable_id":"6f604286c78f4f019ac5b2f1da4caff9","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Quand devez-vous faire remplir le NeedIt ?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"0d93e476a031418196977ee0c8c22030","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"dc7dee60614242e3bd50b99150fbaa4c","fields":["u_when_needed"],"id":"3f41417249ea4c40881d11c90fa8326d","name":"Updated When needed date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"a08db0a31c7e41e7b93bf8c35a968ec8","name":"What to update","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"bad270be8b2e4ac88688c6d780c6f65a","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Quelle données voulez-vous modifier ?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Traitement choix de mise à jour","branches":[{"type":"Branch","label":"Update Needed date","expression":{"type":"Applicability","mode":"query","value":"what_to_update=u_when_needed"},"id":"e79a215d7fff43c98a127d30f99ce579","name":"Update Needed date"},{"type":"Branch","label":"Update Short description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=short_description"},"id":"738f06aa176747e8a0d91b3489cdbf6d","name":"Update Short description"},{"type":"Branch","label":"Cancel  update","expression":{"type":"Applicability","mode":"query","value":"what_to_update=cancel"},"id":"4822b38ef3164c47ad5ce12d12c7aa9d","name":"Cancel  update"}],"id":"1e196aef8a154f75aeecd9c97ceb53df","goal_id":"primary"},{"type":"InputPrompt","variable_id":"cc6151a62a95408b8405eb8fdb2cd53a","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Veuillez saisir une Description courte:\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"86cd964ee9e64cb89317bfee33974524","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"dc7dee60614242e3bd50b99150fbaa4c","fields":["short_description"],"id":"74196fcedbd447f6a19faddefdb05ab7","name":"Updated Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"dc7dee60614242e3bd50b99150fbaa4c","id":"c08bbc1e843a4f519d9256544b21ffd7","name":"Change Short description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"dc7dee60614242e3bd50b99150fbaa4c","id":"d974315aa5f241c7a4f49648efe64798","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"User requests 3 times or more","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaVars.search_count &lt; 3)\n    return true;\n    else return false;\n})()\n"},"id":"1e74b96107e243de8933731307609a16","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":""},"id":"0fce72260f774531ab5aac83d4d674d6","name":"Yes"}],"id":"a67d77b667984918bac778d809a45cae","goal_id":"primary"},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaVars.search_count = vaVars.search_count + 1;\n})()\n","id":"25014b67aa4f48569fb8e61aee0a1421","name":"Update search count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"6eb7464e5903411f893de3d15234713e","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"La donnée que vous cherchez semble ne pas exister. Merci de demander assistance ultérieurement.\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"0fe754caa1c64d4994572c0b33152fa4","name":"Notify end of search","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""}],"edges":[{"type":"Edge","source_node_id":"a67d77b667984918bac778d809a45cae","target_node_id":"519f8bd1534d49aebccf6a30677005fa","branch_id":"1e74b96107e243de8933731307609a16","id":"33a592487e2e4488891bee5a36dc1a5b","name":"1e74b96107e243de8933731307609a16"},{"type":"Edge","source_node_id":"3f41417249ea4c40881d11c90fa8326d","target_node_id":"23a2b937be1d459eaaa13a6b8d2a9a63","id":"edc3104cc9654df78ca4bab17559f81c"},{"type":"Edge","source_node_id":"74196fcedbd447f6a19faddefdb05ab7","target_node_id":"23a2b937be1d459eaaa13a6b8d2a9a63","id":"d8a92a9c218a47f38f64d97999096c13"},{"type":"Edge","source_node_id":"23a2b937be1d459eaaa13a6b8d2a9a63","target_node_id":"3f24c3bdb81a4bfbba8672ebfc8cb353","id":"88bc7316e4104902844029ada1b83a83"},{"type":"Edge","source_node_id":"2a3a5671deef4a56ad706f7633c4e36f","target_node_id":"519f8bd1534d49aebccf6a30677005fa","id":"fb5398d50b1a4c9e8acfc0f8e9fe0fa2"},{"type":"Edge","source_node_id":"519f8bd1534d49aebccf6a30677005fa","target_node_id":"9186cf3768e44be99da993c926d9a2a9","id":"21e65db82a8c4143961c1f9195dde00d"},{"type":"Edge","source_node_id":"9186cf3768e44be99da993c926d9a2a9","target_node_id":"52613459c5134898859711383a6cff3b","id":"234fc7428d4b4810a8640b085c9c7ba9"},{"type":"Edge","source_node_id":"52613459c5134898859711383a6cff3b","target_node_id":"aa971667b0d64c29802515d75ab87a54","id":"0100107ef6a24282968d3d985dc02682"},{"type":"Edge","source_node_id":"3f24c3bdb81a4bfbba8672ebfc8cb353","target_node_id":"8b630fc631c04fe29c3f687b8bfde651","branch_id":"707ffe57902a44d0a0e790e12d0214bd","id":"0d4f0c5a20ae45eab75e8ae1f8fe4c30","name":"707ffe57902a44d0a0e790e12d0214bd"},{"type":"Edge","source_node_id":"aa971667b0d64c29802515d75ab87a54","target_node_id":"a08db0a31c7e41e7b93bf8c35a968ec8","id":"022eb6bb2cc645d3b04bd386dacd8c7b"},{"type":"Edge","source_node_id":"a08db0a31c7e41e7b93bf8c35a968ec8","target_node_id":"1e196aef8a154f75aeecd9c97ceb53df","id":"959c28e28b2d4d7c81dfc4fc17a93bc7"},{"type":"Edge","source_node_id":"1e196aef8a154f75aeecd9c97ceb53df","target_node_id":"0d93e476a031418196977ee0c8c22030","branch_id":"e79a215d7fff43c98a127d30f99ce579","id":"928b7db0b9114ca88a3306c6e7946ebe","name":"e79a215d7fff43c98a127d30f99ce579"},{"type":"Edge","source_node_id":"1e196aef8a154f75aeecd9c97ceb53df","target_node_id":"86cd964ee9e64cb89317bfee33974524","branch_id":"738f06aa176747e8a0d91b3489cdbf6d","id":"600ae682c3f446d48254280e8b0b9024","name":"738f06aa176747e8a0d91b3489cdbf6d"},{"type":"Edge","source_node_id":"1e196aef8a154f75aeecd9c97ceb53df","target_node_id":"23a2b937be1d459eaaa13a6b8d2a9a63","branch_id":"4822b38ef3164c47ad5ce12d12c7aa9d","id":"d71c767246aa43e193cdd6972eeac765","name":"4822b38ef3164c47ad5ce12d12c7aa9d"},{"type":"Edge","source_node_id":"86cd964ee9e64cb89317bfee33974524","target_node_id":"c08bbc1e843a4f519d9256544b21ffd7","id":"1158559ad91c4ca7b62dd3d18fa7a016"},{"type":"Edge","source_node_id":"c08bbc1e843a4f519d9256544b21ffd7","target_node_id":"74196fcedbd447f6a19faddefdb05ab7","id":"dd038a4f676449ccaf0b4d2e53cd0737"},{"type":"Edge","source_node_id":"0d93e476a031418196977ee0c8c22030","target_node_id":"d974315aa5f241c7a4f49648efe64798","id":"3bc195d9f007418cbf2805eefaba6b07"},{"type":"Edge","source_node_id":"d974315aa5f241c7a4f49648efe64798","target_node_id":"3f41417249ea4c40881d11c90fa8326d","id":"ee0baee9104d491d9c8aa42bf3c46d96"},{"type":"Edge","source_node_id":"3f24c3bdb81a4bfbba8672ebfc8cb353","target_node_id":"25014b67aa4f48569fb8e61aee0a1421","branch_id":"af621f0b79a7484690c71da71bee7bd4","id":"7faf7751124c42a2a1c6d19a7eb017ab","name":"af621f0b79a7484690c71da71bee7bd4"},{"type":"Edge","source_node_id":"25014b67aa4f48569fb8e61aee0a1421","target_node_id":"a67d77b667984918bac778d809a45cae","id":"a5d905505bb64c0f965a2799d71d86e2"},{"type":"Edge","source_node_id":"a67d77b667984918bac778d809a45cae","target_node_id":"0fe754caa1c64d4994572c0b33152fa4","branch_id":"0fce72260f774531ab5aac83d4d674d6","id":"b19bdf3a566244afb887dfaa565341f8","name":"0fce72260f774531ab5aac83d4d674d6"},{"type":"Edge","source_node_id":"0fe754caa1c64d4994572c0b33152fa4","target_node_id":"8b630fc631c04fe29c3f687b8bfde651","id":"090a92e2297247829b3fbdbeaa66d95e"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"list":false,"id":"f0ba49941531424d9eb98b0000ae4d2e","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"list":false,"id":"bef00317af684e388112a416060a23ff","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Ressources","element":"hr"}],"id":"b9ba130a21a048b0b2c42b84f39c4dc7","name":"needit_type","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_58872_needit_needit","id":"dc7dee60614242e3bd50b99150fbaa4c","name":"needit_list","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","id":"effe74cedcdb4d4ab6ceae0513c947a0","name":"_search_again","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Date/Time","mode":"date","id":"6f604286c78f4f019ac5b2f1da4caff9","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"","id":"f7276e1466a34ed1a2de16bb71ccdad0","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"La description courte","element":"short_description"},{"name":"La date du dossier","element":"u_when_needed"},{"name":"Annuler","element":"cancel"}],"id":"bad270be8b2e4ac88688c6d780c6f65a","name":"what_to_update","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"String","name":"new_short_description","list":false,"id":"cc6151a62a95408b8405eb8fdb2cd53a","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","id":"bdcb9a41f6e64b25b9674171dfee3994","name":"change_short_description","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"String","name":"notify_end_of_search","list":false,"id":"6eb7464e5903411f893de3d15234713e","formatType":"Text","validationScript":"","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"139c38312f7570100a9e43e72799b612","domain":"global","topic_type":"STANDARD","channels":[],"id":"35ce34b12ff570100a9e43e72799b664","name":"_PRVW__810b8be671713010bd6df02c500be2a4","key_phrases":["Update NeedIt Record","NeedIt request","update request","need something"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"autopilot_topic":false,"design_categories":[{"name":null,"visible":false,"sysId":"b0ec3cb92fb570100a9e43e72799b6f4"}],"triggerable_by_notification":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>35ce34b12ff570100a9e43e72799b664</design_topic_id>
        <name>_PRVW__810b8be671713010bd6df02c500be2a4</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-08-09 08:33:36</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>0d0b03aa2f7130100a9e43e72799b683</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_407007_needit_vi">139c38312f7570100a9e43e72799b612</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">139c38312f7570100a9e43e72799b612</sys_scope>
        <sys_update_name>sys_cb_design_topic_0d0b03aa2f7130100a9e43e72799b683</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-08-09 08:33:36</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
